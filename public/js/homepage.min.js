"use strict";document.addEventListener("DOMContentLoaded",function(){gsap.registerPlugin(ScrollTrigger);const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;gsap.defaults({force3D:!0});const t=document.getElementById("hamburger"),o=document.getElementById("mobileMenu"),r=document.getElementById("menuIcon"),n=document.getElementById("closeIcon");t&&o&&(t.addEventListener("click",function(){o.classList.contains("hidden")?(o.classList.remove("hidden"),o.classList.add("mobile-menu-enter"),r.classList.add("hidden"),n.classList.remove("hidden"),document.body.style.overflow="hidden"):(o.classList.add("hidden"),o.classList.remove("mobile-menu-enter"),r.classList.remove("hidden"),n.classList.add("hidden"),document.body.style.overflow="")}),o.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{o.classList.add("hidden"),r.classList.remove("hidden"),n.classList.add("hidden"),document.body.style.overflow=""})})),document.querySelectorAll(".hero-chart-bar").forEach((t,o)=>{const r=t.style.height;e?t.style.height=r:(t.style.height="0%",gsap.to(t,{height:r,duration:.6,ease:"power2.out",delay:.3+.15*o}))});const a=document.getElementById("reviewsCounter"),s=document.getElementById("monthlyCounter");if(a)if(e)a.innerText="452";else{const O={val:0};gsap.to(O,{val:452,duration:5,ease:"power2.out",delay:.5,onUpdate:()=>{a.innerText=Math.round(O.val)}})}if(s)if(e)s.innerText="+137 this month";else{const X={val:0};gsap.to(X,{val:137,duration:5,ease:"power2.out",delay:.5,onUpdate:()=>{s.innerText="+"+Math.round(X.val)+" this month"}})}e||gsap.to(".hero-visual",{y:15,duration:3,repeat:-1,yoyo:!0,ease:"sine.inOut"});const i=[{name:"Sarah J.",time:"Just now",source:"Google Reviews"},{name:"Mike T.",time:"2m ago",source:"Yelp"},{name:"Jessica R.",time:"15m ago",source:"Vitals.com"},{name:"David L.",time:"4h ago",source:"TripAdvisor"},{name:"Emily W.",time:"1h ago",source:"Facebook"}];let c=0;const l=document.getElementById("reviewNotification"),d=document.getElementById("notificationSource"),g=document.getElementById("notificationDetails");l&&d&&g&&(e?setInterval(()=>{c=(c+1)%i.length;const e=i[c];d.innerText="New 5-Star in "+e.source,g.innerText=e.time+" from "+e.name},3e3):setInterval(()=>{gsap.to(l,{opacity:0,scale:.9,y:10,duration:.4,ease:"power2.in",onComplete:()=>{c=(c+1)%i.length;const e=i[c];d.innerText="New 5-Star in "+e.source,g.innerText=e.time+" from "+e.name,gsap.fromTo(l,{opacity:0,scale:.9,y:-10},{opacity:1,scale:1,y:0,duration:.5,ease:"back.out(1.7)"})}})},3e3)),gsap.from(".problem-content > *",{y:40,opacity:0,duration:.8,stagger:.2,scrollTrigger:{trigger:"#problem",start:"top 75%"}}),gsap.from(".problem-visual",{scale:.9,opacity:0,duration:1,ease:"back.out(1.7)",scrollTrigger:{trigger:".problem-visual",start:"top 80%"}}),gsap.fromTo(".hiw-header",{y:30,opacity:0},{y:0,opacity:1,duration:.8,scrollTrigger:{trigger:".hiw-header",start:"top 90%"}}),gsap.fromTo(".step-card",{y:50,opacity:0},{y:0,opacity:1,duration:.8,stagger:.2,ease:"power2.out",scrollTrigger:{trigger:".step-cards-container",start:"top 85%"}});const u=document.getElementById("reviewSlider"),m=document.getElementById("reviewSliderFill"),p=document.getElementById("reviewSliderThumb"),y=document.getElementById("reviewCount"),h=document.getElementById("rankStatus"),v=document.getElementById("businessList"),f=document.getElementById("positionLabel");if(u&&v){const j=[{name:"Pro Service Experts",reviews:145,rating:4.8,isMe:!1},{name:"City Best Local",reviews:88,rating:4.6,isMe:!1},{name:"Budget Bros",reviews:42,rating:4.2,isMe:!1}];let U=4;const G=["#3B82F6","#8B5CF6","#22C55E","#F97316","#EAB308","#6366F1","#14B8A6"],J=200,W=[];function H(){if(e)return;const t=document.getElementById("map-simulator");if(!t)return;const o=t.getBoundingClientRect(),r=o.left+o.width/2,n=o.top+.4*o.height,a=window.innerHeight-n-10;let s=document.querySelector(".confetti-container");s||(s=document.createElement("div"),s.className="confetti-container",s.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;overflow:hidden;",document.body.appendChild(s));let i=W.reduce((e,t)=>e+t.pieces.length,0);for(;i+150>J&&W.length>0;){const e=W[0];for(;e.pieces.length>0&&i+150>J;){e.pieces.shift().el.remove(),i--}0===e.pieces.length&&W.shift()}const c=[];for(let e=0;e<150;e++){const e=document.createElement("div"),t=G[Math.floor(Math.random()*G.length)],o=12*Math.random()+6,a=Math.random()>.6;e.style.cssText=`\n          position: absolute;\n          width: ${o}px;\n          height: ${a?o:.4*o}px;\n          background: ${t};\n          border-radius: ${a?"50%":"2px"};\n          left: ${r}px;\n          top: ${n}px;\n          opacity: 1;\n          will-change: transform, opacity;\n          backface-visibility: hidden;\n          -webkit-backface-visibility: hidden;\n          transform: translate3d(0, 0, 0);\n        `,s.appendChild(e);const i=360*Math.random()*(Math.PI/180),l=800*Math.random()+400;c.push({el:e,x:0,y:0,vx:Math.cos(i)*l*.015,vy:Math.sin(i)*l*.015-15*Math.random()-10,rotation:360*Math.random(),rotationSpeed:15*(Math.random()-.5),gravity:.4+.2*Math.random(),drag:.98+.015*Math.random(),opacity:1,onFloor:!1,bounciness:.3+.2*Math.random()})}const l={pieces:c,startTime:Date.now()};W.push(l);requestAnimationFrame(function e(){const t=(Date.now()-l.startTime)/8e3;if(t>=1){l.pieces.forEach(e=>e.el.remove()),l.pieces.length=0;const e=W.indexOf(l);return e>-1&&W.splice(e,1),void(0===W.length&&s.parentNode&&s.remove())}l.pieces.forEach(e=>{e.onFloor||(e.vy+=e.gravity,e.vx*=e.drag,e.vy*=e.drag,e.x+=e.vx,e.y+=e.vy,e.y>=a&&(e.y=a,Math.abs(e.vy)>2?(e.vy=-e.vy*e.bounciness,e.vx*=.8,e.rotationSpeed*=.5):(e.onFloor=!0,e.vy=0,e.vx=0,e.rotationSpeed=0)),e.rotation+=e.rotationSpeed),t>.7&&(e.opacity=1-(t-.7)/.3),e.el.style.transform=`translate3d(${e.x}px, ${e.y}px, 0) rotate(${e.rotation}deg)`,e.el.style.opacity=e.opacity}),requestAnimationFrame(e)})}function V(e){const t=[...j,{name:"Your Business",reviews:e,rating:4.9,isMe:!0}].sort((e,t)=>t.reviews-e.reviews),o=t.findIndex(e=>e.isMe)+1;U>1&&1===o&&H(),U=o;const r=(e-12)/188*100;let n,a,s,i;m.style.width=r+"%",p.style.left="calc("+r+"% - 16px)",y.textContent=e,1===o?(n="bg-green-50 border-green-100 text-green-800",a="ü•á You are #1 in the Map Pack!",s="üèÜ You're the obvious choice",i="bg-green-100 text-green-700"):2===o?(n="bg-green-50 border-green-100 text-green-800",a="ü•à You're beating 2 competitors!",s="üî• Almost there...",i="bg-yellow-100 text-yellow-700"):3===o?(n="bg-green-50 border-green-100 text-green-800",a="ü•â You made the Top 3!",s="üëÄ They're starting to notice you",i="bg-blue-100 text-blue-700"):(n="bg-gray-50 border-gray-200 text-gray-500",a="You are invisible on page 2.",s="They don't even see you",i="bg-gray-100 text-gray-500"),h.className="p-4 rounded-xl border text-center transition-colors duration-300 "+n;const c=h.querySelector("p")||document.createElement("p");if(c.className="font-bold text-lg",c.textContent=a,h.contains(c)||h.appendChild(c),f){let e=f.querySelector("span");e||(e=document.createElement("span"),f.appendChild(e)),e.className="inline-block px-2 py-1 rounded-full text-xs font-semibold "+i,e.textContent=s}v.innerHTML=t.map((e,t)=>{const o=e.isMe?"bg-blue-50/80 z-20":"bg-white z-10",r=e.isMe?'<div class="w-8 h-8 bg-blue-600 text-white rounded flex items-center justify-center font-bold text-xs shadow-md shadow-blue-200">You</div>':'<div class="w-8 h-8 bg-red-500 text-white rounded flex items-center justify-center font-bold text-sm shadow-sm">'+String.fromCharCode(65+t)+"</div>",n=e.isMe?"text-blue-700":"text-gray-900",a=Array(5).fill('<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>').join("");return'<div class="absolute w-full p-4 flex items-start gap-4 transition-all duration-500 ease-in-out border-b border-gray-50 '+o+'" style="transform: translateY('+90*t+'px); height: 90px;"><div class="mt-1 flex-shrink-0">'+r+'</div><div class="flex-grow"><h4 class="font-bold text-base '+n+'">'+e.name+'</h4><div class="flex items-center gap-1.5 text-sm mt-1"><span class="font-bold text-orange-500">'+e.rating+'</span><div class="flex text-yellow-400">'+a+'</div><span class="text-gray-500">('+e.reviews+')</span></div><div class="text-xs text-gray-400 mt-1 font-medium">Service Business ‚Ä¢ Open now</div></div></div>'}).join("")}V(parseInt(u.value)),u.addEventListener("input",function(){V(parseInt(this.value))}),gsap.from("#map-simulator .text-center",{y:30,opacity:0,duration:.8,scrollTrigger:{trigger:"#map-simulator",start:"top 60%"}}),gsap.from("#map-simulator .lg\\:col-span-5",{x:-50,opacity:0,duration:1,ease:"power3.out",scrollTrigger:{trigger:"#map-simulator",start:"top 60%"}}),gsap.from("#map-simulator .lg\\:col-span-7",{x:50,opacity:0,duration:1,ease:"power3.out",scrollTrigger:{trigger:"#map-simulator",start:"top 60%"}}),ScrollTrigger.create({trigger:"#map-simulator",start:"top 55%",end:"bottom 40%",scrub:1,onUpdate:e=>{const t=e.progress,o=Math.round(12+188*t);u.value=o,V(o)}})}gsap.fromTo(".setup-header",{y:30,opacity:0},{y:0,opacity:1,duration:.8,scrollTrigger:{trigger:".setup-header",start:"top 80%"}}),gsap.fromTo(".setup-step",{y:50,opacity:0},{y:0,opacity:1,duration:.8,stagger:.2,ease:"power2.out",scrollTrigger:{trigger:".steps-container",start:"top 75%"}}),gsap.fromTo(".connecting-line",{scaleX:0},{scaleX:1,duration:1.5,ease:"power2.out",scrollTrigger:{trigger:".steps-container",start:"top 75%"}}),gsap.fromTo(".setup-cta",{y:30,opacity:0},{y:0,opacity:1,duration:.8,delay:.6,ease:"power2.out",scrollTrigger:{trigger:".steps-container",start:"top 60%"}});const x=document.querySelectorAll(".stat-reveal");x.length>0&&x.forEach((e,t)=>{gsap.to(e,{opacity:1,y:0,duration:1,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 85%",end:"top 40%",toggleActions:"play none none reverse"}})}),gsap.fromTo(".features-header",{y:50,opacity:0},{y:0,opacity:1,duration:1,ease:"power2.out",scrollTrigger:{trigger:"#features",start:"top 80%"}});const w=document.querySelectorAll(".feature-card"),b=document.querySelectorAll(".feature-card-wrapper");if(window.innerWidth<768&&b.length>0){const _=document.getElementById("featuresStackContainer"),K=(document.getElementById("featuresStack"),b.length),Q=K*35;_.style.height=Q+"vh";const Z=6,ee=.02;b.forEach((e,t)=>{const o=e.querySelector(".feature-card"),r=K-t,n=1-t*ee,a=t*Z;gsap.set(e,{position:"absolute",top:0,left:"50%",xPercent:-50,x:0,zIndex:r,y:a,scale:n,opacity:1});const s=o.querySelector(".feature-badge");s&&gsap.set(s,{scale:0===t?1:.8,opacity:0===t?1:.5})}),ScrollTrigger.create({trigger:_,start:"top 15%",end:"bottom 85%",scrub:.3,onUpdate:e=>{const t=e.progress*(K-1),o=Math.min(Math.floor(t),K-1),r=t-o;b.forEach((e,t)=>{const n=e.querySelector(".feature-card").querySelector(".feature-badge"),a=t-o;if(t<o)gsap.set(e,{y:-350,x:-150,xPercent:-50,scale:.7,rotation:-20,opacity:0,zIndex:0});else if(t===o){const t=-350*r,o=-150*r,a=1-.3*r,s=-20*r,i=1-r;gsap.set(e,{y:t,x:o,xPercent:-50,scale:a,rotation:s,opacity:i,zIndex:K}),n&&gsap.set(n,{scale:1-.2*r,opacity:1-.5*r})}else{const s=a-1,i=t===o+1?r:0,c=Math.max(0,s)*Z,l=c-i*c,d=1-Math.max(0,s)*ee,g=d+i*(1-d);gsap.set(e,{y:l,x:0,xPercent:-50,scale:g,rotation:0,opacity:1,zIndex:K-t}),n&&t===o+1&&gsap.set(n,{scale:.8+.2*i,opacity:.5+.5*i})}})}})}else w.forEach((e,t)=>{const o=t%3;let r=0,n=0,a=0;0===o?(r=-150,a=-5):1===o?(n=150,a=3):(r=150,a=5);const s=.1*Math.floor(t/3);gsap.set(e,{x:r,y:n,rotation:a,scale:.95,opacity:0}),gsap.to(e,{x:0,y:0,rotation:0,scale:1,opacity:1,duration:.8,delay:s,ease:"power3.out",scrollTrigger:{trigger:e,start:"top 85%"}}),e.addEventListener("mousemove",t=>{const o=e.getBoundingClientRect(),r=t.clientX-o.left,n=t.clientY-o.top,a=o.width/2,s=(n-o.height/2)/15,i=(a-r)/15;gsap.to(e,{rotateX:s,rotateY:i,duration:.4,ease:"power2.out",overwrite:"auto"})}),e.addEventListener("mouseleave",()=>{gsap.to(e,{rotateX:0,rotateY:0,duration:.6,ease:"power2.out",overwrite:"auto"})});const i=e.querySelector(".feature-badge");i&&gsap.fromTo(i,{scale:0,opacity:0},{scale:1,opacity:1,duration:.4,delay:s+.3,ease:"back.out(1.5)",scrollTrigger:{trigger:e,start:"top 85%"}});const c=e.querySelector(".w-12, .w-14");if(c){const t=c.querySelector("svg"),o=e.dataset.color;e.addEventListener("mouseenter",()=>{"blue"===o?gsap.to(t,{x:2,duration:.05,repeat:5,yoyo:!0,ease:"none"}):"purple"===o?gsap.to(t,{scale:1.2,duration:.3,repeat:1,yoyo:!0,ease:"power2.inOut"}):"green"===o?gsap.fromTo(t,{scaleY:.8,transformOrigin:"bottom"},{scaleY:1,duration:.4,ease:"elastic.out(1, 0.5)"}):"orange"===o?gsap.to(t,{y:-5,duration:.2,repeat:2,yoyo:!0,ease:"power2.out"}):"yellow"===o?gsap.to(t,{opacity:.5,duration:.1,repeat:3,yoyo:!0}):"indigo"===o?gsap.to(t,{rotation:360,duration:.8,ease:"power2.inOut"}):"teal"===o&&gsap.to(t,{rotation:15,duration:.15,repeat:3,yoyo:!0,ease:"none"})})}});const E=document.getElementById("featuresScroll");let T=!1;if(E){function te(){if(!T&&E){const e=E.scrollWidth/3;E.scrollLeft>=e?E.scrollLeft=0:E.scrollLeft+=1}requestAnimationFrame(te)}requestAnimationFrame(te),E.addEventListener("mouseenter",()=>{T=!0}),E.addEventListener("mouseleave",()=>{T=!1}),E.addEventListener("touchstart",()=>{T=!0},{passive:!0}),E.addEventListener("touchend",()=>{setTimeout(()=>{T=!1},1e3)},{passive:!0})}gsap.from([".sp-header",".stat-item"],{y:30,opacity:0,duration:.8,stagger:.1,scrollTrigger:{trigger:".sp-header",start:"top 85%"}}),gsap.from(".calculator-card",{y:50,opacity:0,duration:1,ease:"power3.out",scrollTrigger:{trigger:".calculator-card",start:"top 85%"}});const L=document.getElementById("customerSlider"),B=document.getElementById("customerCount"),I=document.getElementById("sliderFill"),M=document.getElementById("sliderThumb"),S=document.getElementById("monthlyReviews"),C=document.getElementById("yearlyReviews");if(L){function oe(){const e=parseInt(L.value),t=e/1e3*100,o=Math.round(.8*e),r=12*o;B.innerText=e,I.style.width=t+"%",M.style.left="calc("+t+"% - 16px)",S.innerText="+"+o,C.innerText="+"+r}L.addEventListener("input",oe),oe()}const k=document.getElementById("monthlyBtn"),q=document.getElementById("yearlyBtn"),A=document.getElementById("priceDisplay"),Y=document.getElementById("billingText");k&&q&&(k.addEventListener("click",()=>{k.classList.add("bg-white","shadow-md","text-[#500B42]"),k.classList.remove("text-gray-500"),q.classList.remove("bg-white","shadow-md","text-[#500B42]"),q.classList.add("text-gray-500"),A.innerText="$77",Y.innerText="No contracts. Cancel anytime."}),q.addEventListener("click",()=>{q.classList.add("bg-white","shadow-md","text-[#500B42]"),q.classList.remove("text-gray-500"),k.classList.remove("bg-white","shadow-md","text-[#500B42]"),k.classList.add("text-gray-500"),A.innerText="$64",Y.innerText="Billed $770 yearly"})),gsap.from(".dhiw-step",{y:50,opacity:0,duration:.8,stagger:.2,scrollTrigger:{trigger:".dhiw-container",start:"top 75%"}});const F=document.getElementById("finalCtaCard");F&&F.addEventListener("mousemove",e=>{const t=F.getBoundingClientRect(),o=e.clientX-t.left,r=e.clientY-t.top;F.style.setProperty("--mouse-x",o+"px"),F.style.setProperty("--mouse-y",r+"px")}),document.querySelectorAll(".step-card, .feature-card").forEach(e=>{e.addEventListener("mousemove",t=>{const o=e.getBoundingClientRect(),r=t.clientX-o.left,n=t.clientY-o.top;e.style.setProperty("--mouse-x",r+"px"),e.style.setProperty("--mouse-y",n+"px")})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if(t&&"#"!==t){e.preventDefault();const o=document.querySelector(t);if(o){const e=100,t=o.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:t,behavior:"smooth"})}}})}),document.querySelectorAll("[data-track]").forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-track");window.dataLayer&&window.dataLayer.push({event:"cta_click",action:e})})});const P=document.getElementById("industriesTrigger"),$=document.getElementById("industriesMegaMenu");let z;P&&$&&(P.addEventListener("mouseenter",()=>{clearTimeout(z),$.classList.add("open"),P.classList.add("active")}),P.addEventListener("mouseleave",()=>{z=setTimeout(()=>{$.matches(":hover")||($.classList.remove("open"),P.classList.remove("active"))},100)}),$.addEventListener("mouseenter",()=>{clearTimeout(z)}),$.addEventListener("mouseleave",()=>{$.classList.remove("open"),P.classList.remove("active")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&($.classList.remove("open"),P.classList.remove("active"))}));const D=document.getElementById("mobileIndustriesTrigger"),N=document.getElementById("mobileIndustriesAccordion"),R=document.getElementById("mobileIndustriesArrow");D&&N&&D.addEventListener("click",e=>{e.preventDefault(),N.classList.toggle("open"),R.classList.toggle("rotate-180")}),console.log("%c‚≠ê MoreStars.io","font-size: 24px; font-weight: bold; color: #FFBA49;"),console.log("%cGet more Google reviews for your business","font-size: 14px; color: #500B42;")});