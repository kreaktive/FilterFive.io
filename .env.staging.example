# =========================================
# MoreStars - STAGING Environment Template
# =========================================
#
# This file contains configuration for the STAGING environment.
# Copy to .env.staging and fill in actual values.
#
# STAGING is a pre-production environment that:
# - Uses test/sandbox versions of external services
# - Has stricter validation than development
# - Mirrors production infrastructure
# - Used for QA and integration testing

# ===================
# ENVIRONMENT
# ===================
NODE_ENV=staging
APP_URL=https://staging.morestars.io
PORT=3000

# ===================
# DATABASE
# ===================
# Use a separate staging database
DB_HOST=your-staging-db-host
DB_PORT=5432
DB_NAME=morestars_staging
DB_USER=morestars_staging_user
DB_PASSWORD=your-secure-staging-db-password

# ===================
# SECURITY SECRETS
# ===================
# Generate unique secrets for staging (different from production!)
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
API_SECRET=your-staging-api-secret-min-32-chars
SESSION_SECRET=your-staging-session-secret-min-32-chars

# ===================
# REDIS (Required for staging)
# ===================
REDIS_URL=redis://your-staging-redis-host:6379

# ===================
# STRIPE (Test Mode)
# ===================
# Use Stripe TEST mode keys in staging
STRIPE_SECRET_KEY=sk_test_your_staging_stripe_test_key
STRIPE_WEBHOOK_SECRET=whsec_your_staging_webhook_secret
STRIPE_PRICE_MONTHLY=price_staging_monthly_id
STRIPE_PRICE_ANNUAL=price_staging_annual_id

# ===================
# TWILIO (Test Credentials or Sandbox)
# ===================
# Use Twilio test credentials or a separate staging account
TWILIO_ACCOUNT_SID=ACyour_staging_twilio_account_sid
TWILIO_AUTH_TOKEN=your_staging_twilio_auth_token
TWILIO_MESSAGING_SERVICE_SID=MGyour_staging_messaging_service_sid

# ===================
# EMAIL (Resend)
# ===================
# Use a staging-specific sender domain if available
RESEND_API_KEY=re_your_staging_resend_api_key
RESEND_FROM_EMAIL=noreply@staging.morestars.io

# ===================
# ERROR TRACKING (Sentry)
# ===================
# Sentry should be enabled in staging for error visibility
SENTRY_DSN=https://your-staging-sentry-dsn@sentry.io/project-id

# ===================
# RECAPTCHA
# ===================
# Use reCAPTCHA test keys or staging-specific keys
RECAPTCHA_SITE_KEY=your_staging_recaptcha_site_key
RECAPTCHA_SECRET_KEY=your_staging_recaptcha_secret_key

# ===================
# POS INTEGRATIONS (Sandbox Mode)
# ===================
# Square Sandbox
SQUARE_APPLICATION_ID=sandbox-your-square-application-id
SQUARE_APPLICATION_SECRET=sandbox-your-square-application-secret
SQUARE_ENVIRONMENT=sandbox
SQUARE_WEBHOOK_SIGNATURE_KEY=your_staging_square_webhook_key

# Shopify (Development Store)
SHOPIFY_API_KEY=your_staging_shopify_api_key
SHOPIFY_API_SECRET=your_staging_shopify_api_secret

# Token encryption (generate unique for staging)
POS_TOKEN_ENCRYPTION_KEY=your-staging-pos-encryption-key-32ch

# ===================
# CMS (Sanity)
# ===================
# Can share with production or use staging dataset
SANITY_PROJECT_ID=your_sanity_project_id
SANITY_DATASET=staging
SANITY_API_VERSION=2024-01-01

# ===================
# FEATURE FLAGS
# ===================
ENABLE_CRON=true
MAINTENANCE_MODE=false
LOG_LEVEL=debug

# ===================
# STAGING CHECKLIST
# ===================
# Before deploying to staging, ensure:
# [ ] All secrets are unique (not shared with dev or prod)
# [ ] Database is separate from production
# [ ] Stripe is in TEST mode
# [ ] Twilio uses test/staging credentials
# [ ] Sentry DSN is configured
# [ ] SSL certificate is valid for staging domain
# [ ] Redis is configured and accessible
